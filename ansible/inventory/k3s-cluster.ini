# K3s Cluster Inventory
# Customize this file with your actual hostnames and IP addresses
#
# Usage:
#   ansible-playbook -i inventory/k3s-cluster.ini playbooks/k3s-cluster.yml
#
# Notes:
#   - For HA, deploy at least 3 master nodes (odd number recommended)
#   - Adjust ansible_host to match your network configuration
#   - Ensure SSH key authentication is configured for all nodes

# ============================================
# K3s Master Nodes (Control Plane)
# ============================================
# Masters run the Kubernetes API server, scheduler, and controller manager
# In HA mode, etcd is embedded in the K3s server
[k3s_masters]
k3s-master-01 ansible_host=10.2.0.228 ansible_user=ansible
#k3s-master-02 ansible_host=192.168.1.11 ansible_user=ansible
#k3s-master-03 ansible_host=192.168.1.12 ansible_user=ansible

# ============================================
# K3s Worker Nodes (Compute)
# ============================================
# Workers run application workloads
[k3s_workers]
k3s-worker-01 ansible_host=10.2.0.101 ansible_user=ansible
k3s-worker-02 ansible_host=10.2.0.102 ansible_user=ansible
k3s-worker-03 ansible_host=10.2.0.103 ansible_user=ansible

# ============================================
# GPU Worker Nodes (Optional)
# ============================================
# Dedicated workers with GPU for ML/AI workloads
[k3s_gpu_workers]
# k3s-gpu-01 ansible_host=192.168.1.30 ansible_user=ansible

# ============================================
# Storage Nodes (Optional)
# ============================================
# Dedicated nodes for Rook/Ceph or other distributed storage
[k3s_storage_nodes]
# k3s-storage-01 ansible_host=192.168.1.40 ansible_user=ansible
# k3s-storage-02 ansible_host=192.168.1.41 ansible_user=ansible
# k3s-storage-03 ansible_host=192.168.1.42 ansible_user=ansible

# ============================================
# Group Aggregations
# ============================================
[k3s_cluster:children]
k3s_masters
k3s_workers
k3s_gpu_workers
k3s_storage_nodes

[k3s_all_workers:children]
k3s_workers
k3s_gpu_workers
k3s_storage_nodes

# ============================================
# Group Variables (can be overridden in group_vars/)
# ============================================
[k3s_cluster:vars]
# Ansible connection settings
ansible_python_interpreter=/usr/bin/python3
ansible_ssh_private_key_file=~/.ssh/id_ed25519
ansible_ssh_common_args='-o StrictHostKeyChecking=no'

# Become settings
ansible_become=true
ansible_become_method=sudo
ansible_become_user=root

# ============================================
# Example: Single Node Cluster (for testing)
# ============================================
# Uncomment below for a simple single-node setup
# [k3s_masters]
# k3s-single ansible_host=192.168.1.100 ansible_user=ansible
#
# [k3s_workers]
# # Empty - single node acts as both master and worker
#
# [k3s_cluster:children]
# k3s_masters

# ============================================
# Example: Development Cluster (1 master, 2 workers)
# ============================================
# [k3s_masters]
# k3s-dev-master ansible_host=192.168.1.50 ansible_user=ansible
#
# [k3s_workers]
# k3s-dev-worker-01 ansible_host=192.168.1.51 ansible_user=ansible
# k3s-dev-worker-02 ansible_host=192.168.1.52 ansible_user=ansible

# ============================================
# Network Configuration Examples
# ============================================
# If nodes have multiple network interfaces, specify which to use:
# k3s-master-01 ansible_host=192.168.1.10 k3s_node_ip=10.0.0.10

# For nodes with custom SSH ports:
# k3s-master-01 ansible_host=192.168.1.10 ansible_port=2222

# For nodes behind jump host:
# k3s-master-01 ansible_host=192.168.1.10 ansible_ssh_common_args='-o ProxyCommand="ssh -W %h:%p jump-host"'
