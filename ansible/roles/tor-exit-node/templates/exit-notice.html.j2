<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>This is a Tor Exit Node</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
            background-color: #f5f5f5;
            line-height: 1.6;
        }
        .container {
            background-color: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #7d4698;
            border-bottom: 3px solid #7d4698;
            padding-bottom: 10px;
        }
        h2 {
            color: #555;
            margin-top: 30px;
        }
        .warning {
            background-color: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 15px;
            margin: 20px 0;
        }
        .info {
            background-color: #d1ecf1;
            border-left: 4px solid #0c5460;
            padding: 15px;
            margin: 20px 0;
        }
        .contact {
            background-color: #e7f3ff;
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
        }
        a {
            color: #7d4698;
            text-decoration: none;
        }
        a:hover {
            text-decoration: underline;
        }
        code {
            background-color: #f4f4f4;
            padding: 2px 5px;
            border-radius: 3px;
            font-family: monospace;
        }
        ul {
            margin-left: 20px;
        }
        .logo {
            text-align: center;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="logo">
            <h1>ðŸ§… This is a Tor Exit Node</h1>
        </div>

        <div class="warning">
            <strong>Important Notice:</strong> This server is operating as a Tor exit node.
            If you are investigating abuse originating from this IP address, please read the
            information below carefully.
        </div>

        <h2>What is Tor?</h2>
        <p>
            The Tor network is a group of volunteer-operated servers that allows people to
            improve their privacy and security on the Internet. Tor users employ this network
            by connecting through a series of virtual tunnels rather than making a direct
            connection, thus allowing both organizations and individuals to share information
            over public networks without compromising their privacy.
        </p>

        <h2>What is a Tor Exit Node?</h2>
        <p>
            This computer is configured as a Tor <strong>exit node</strong>. That means that
            if you are seeing connections from this IP address, it is likely because a Tor
            user connected to the Internet through this node. The Tor network is designed to
            make it difficult to determine the actual source of the connection, which is the
            fundamental purpose of the system.
        </p>

        <div class="info">
            <strong>Key Point:</strong> In simple terms, this computer is acting as a relay
            for connections from the Tor network. The actual source of the connection you're
            investigating is not this server, but rather a Tor user somewhere else on the Internet.
        </div>

        <h2>Abuse Complaints</h2>
        <p>
            If you have a complaint about activity originating from this IP address, please
            understand that:
        </p>
        <ul>
            <li>This server <strong>cannot</strong> identify the actual source of the connection</li>
            <li>This server <strong>does not</strong> log connection data that would allow identification</li>
            <li>This server is part of a network designed to protect user privacy and anonymity</li>
            <li>The operator of this node has no control over the content being transmitted</li>
        </ul>

        <p>
            The Tor Project has prepared some helpful information for understanding Tor exit
            nodes and abuse complaints:
        </p>
        <ul>
            <li><a href="https://community.torproject.org/relay/community-resources/eff-tor-legal-faq/" target="_blank">EFF Tor Legal FAQ</a></li>
            <li><a href="https://community.torproject.org/relay/community-resources/tor-abuse-templates/" target="_blank">Tor Abuse Response Templates</a></li>
            <li><a href="https://www.torproject.org/" target="_blank">The Tor Project</a></li>
        </ul>

        <h2>Exit Policy</h2>
        <p>
            This exit node implements a <strong>{% if tor_reduced_exit_policy %}reduced exit policy{% else %}custom exit policy{% endif %}</strong>
            to minimize abuse while still providing useful service to the Tor network.
        </p>

        {% if tor_reduced_exit_policy %}
        <p>
            The reduced exit policy allows connections to common Internet services (HTTP, HTTPS,
            email, instant messaging, etc.) while blocking ports commonly associated with abuse
            (such as BitTorrent and SMTP on port 25).
        </p>
        {% endif %}

        <h2>Relay Information</h2>
        <div class="contact">
            <p><strong>Relay Nickname:</strong> <code>{{ tor_relay_nickname }}</code></p>
            <p><strong>Operator:</strong> {{ tor_exit_notice_operator }}</p>
            {% if tor_exit_notice_email %}
            <p><strong>Contact Email:</strong> <a href="mailto:{{ tor_exit_notice_email }}">{{ tor_exit_notice_email }}</a></p>
            {% endif %}
            {% if tor_abuse_email %}
            <p><strong>Abuse Contact:</strong> <a href="mailto:{{ tor_abuse_email }}">{{ tor_abuse_email }}</a></p>
            {% endif %}
        </div>

        <h2>Technical Details</h2>
        <p>
            This server is running the Tor software on the following configuration:
        </p>
        <ul>
            <li><strong>ORPort:</strong> {{ tor_or_port }}</li>
            {% if tor_dir_port is defined and tor_dir_port | int > 0 %}
            <li><strong>DirPort:</strong> {{ tor_dir_port }}</li>
            {% endif %}
            <li><strong>Exit Policy:</strong> {% if tor_reduced_exit_policy %}Reduced Exit Policy{% else %}Custom Policy{% endif %}</li>
        </ul>

        <h2>Legal Information</h2>
        <p>
            Operating a Tor exit node is legal in most jurisdictions. The operator of this
            node is providing a service to enhance Internet privacy and freedom of expression,
            which are protected activities in democratic societies.
        </p>

        <div class="info">
            <p>
                For law enforcement inquiries, please note that this server does not maintain
                logs that would allow identification of specific Tor users. Any legal requests
                should be directed to the Tor Project or to the relevant Internet service
                provider of the actual user, if that information can be obtained through
                proper legal channels.
            </p>
        </div>

        <h2>Learn More</h2>
        <p>
            To learn more about Tor and how it works:
        </p>
        <ul>
            <li><a href="https://www.torproject.org/about/overview.html" target="_blank">Tor Overview</a></li>
            <li><a href="https://support.torproject.org/" target="_blank">Tor Support</a></li>
            <li><a href="https://community.torproject.org/relay/" target="_blank">Tor Relay Guide</a></li>
        </ul>

        <hr style="margin-top: 40px; border: none; border-top: 1px solid #ddd;">

        <p style="text-align: center; color: #888; font-size: 0.9em;">
            This notice was generated on {{ ansible_date_time.iso8601 }}<br>
            Server: {{ tor_exit_notice_domain }}
        </p>
    </div>
</body>
</html>
